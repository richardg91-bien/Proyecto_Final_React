import{j as e,F as s,B as a}from"./bootstrap-vendor-Ei7xZnWI.js";import{r,u as i,d as n,L as t}from"./react-vendor-DhwnvXGV.js";import{u as o,c as l}from"./index-DCuYD6uT.js";import{S as c}from"./index-CgC3Tvfr.js";import"./ui-vendor-CaARl6lq.js";import"./icons-vendor-CNWg5Z-e.js";const m=()=>{const{login:m,register:d,isAuthenticated:u}=o(),[p,f]=r.useState("login"),[g,h]=r.useState({email:"",password:"",name:"",confirmPassword:""}),[x,b]=r.useState(""),[j,y]=r.useState(""),[N,w]=r.useState(!1),v=i(),F=v.state?.from?.pathname||"/",k="/cart"===F;if(u)return e.jsx(n,{to:F,replace:!0});const C=e=>{const{name:s,value:a}=e.target;h(e=>({...e,[s]:a})),b(""),y("")},Q=e=>{h("admin"===e?{email:l.auth.admin.email,password:l.auth.admin.password,name:"Administrador",confirmPassword:l.auth.admin.password}:{email:l.auth.user.email,password:l.auth.user.password,name:"Usuario Demo",confirmPassword:l.auth.user.password})};return e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"login"===p?"Iniciar Sesión":"Crear Cuenta",description:"Accede a tu cuenta en Indumentaria Agat para gestionar tus compras, ver tu carrito y disfrutar de una experiencia personalizada.",keywords:"login, iniciar sesión, registro, cuenta, usuario"}),e.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-6 col-lg-5",children:e.jsx("div",{className:"card shadow-lg border-0",children:e.jsxs("div",{className:"card-body p-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[k&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-cart-plus me-2"}),e.jsx("strong",{children:"¡Para comprar necesitas una cuenta!"}),e.jsx("br",{}),e.jsx("small",{children:"Regístrate o inicia sesión para acceder a tu carrito de compras"})]}),e.jsx("h2",{className:"h3 fw-bold",style:{color:"rgba(0,0,0,0.8)",fontFamily:"Lato, sans-serif"},children:"login"===p?"Iniciar Sesión":"Crear Cuenta"}),e.jsx("p",{className:"text-muted",style:{fontFamily:"Quicksand, sans-serif"},children:k?"login"===p?"Inicia sesión para acceder a tu carrito":"Crea tu cuenta para empezar a comprar":"login"===p?"Accede a tu cuenta de Indumentaria Agat":"Regístrate en Indumentaria Agat"})]}),x&&e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),x]}),j&&e.jsxs("div",{className:"alert alert-success",role:"alert",children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),j]}),e.jsxs(s,{onSubmit:async e=>{if(e.preventDefault(),w(!0),b(""),y(""),(()=>{if("register"===p){if(!g.name.trim())return b("El nombre es obligatorio"),!1;if(g.password!==g.confirmPassword)return b("Las contraseñas no coinciden"),!1;if(g.password.length<6)return b("La contraseña debe tener al menos 6 caracteres"),!1}return!(!g.email||!g.password)||(b("Email y contraseña son obligatorios"),!1)})())try{let e;"register"===p?(e=d(g),e.success&&y("¡Registro exitoso! Iniciando sesión automáticamente...")):(e=m(g),e.success&&y("¡Login exitoso! Redirigiendo...")),e.success||b(e.message||"Error al "+("register"===p?"registrarse":"iniciar sesión"))}catch{b("Error inesperado. Inténtalo de nuevo.")}finally{w(!1)}else w(!1)},children:["register"===p&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Nombre completo *"}),e.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:g.name,onChange:C,required:"register"===p,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"Tu nombre completo",autoComplete:"name"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Correo electrónico *"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:g.email,onChange:C,required:!0,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"tu@email.com",autoComplete:"email"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Contraseña *"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:g.password,onChange:C,required:!0,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"register"===p?"Mínimo 6 caracteres":"Tu contraseña",autoComplete:"register"===p?"new-password":"current-password"})]}),"register"===p&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Confirmar contraseña *"}),e.jsx("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:g.confirmPassword,onChange:C,required:"register"===p,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"Repite tu contraseña",autoComplete:"new-password"})]}),e.jsx(a,{type:"submit",size:"lg",className:"w-100 mb-3",disabled:N,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"25px",fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"register"===p?"Registrando...":"Iniciando sesión..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`bi ${"register"===p?"bi-person-plus":"bi-box-arrow-in-right"} me-2`}),"register"===p?"Crear Cuenta":"Iniciar Sesión"]})})]}),e.jsx("div",{className:"text-center mb-3",children:e.jsx("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:()=>{f("login"===p?"register":"login"),b(""),y(""),h({email:"",password:"",name:"",confirmPassword:""})},style:{fontFamily:"Quicksand, sans-serif"},children:"login"===p?"¿No tienes cuenta? Regístrate aquí":"¿Ya tienes cuenta? Inicia sesión aquí"})}),e.jsxs("div",{className:"border-top pt-3 mt-4",children:[e.jsx("p",{className:"text-center text-muted small mb-3",style:{fontFamily:"Quicksand, sans-serif"},children:"Cuentas de prueba:"}),e.jsxs("div",{className:"d-grid gap-2",children:[e.jsxs(a,{variant:"outline-primary",size:"sm",onClick:()=>Q("user"),style:{fontFamily:"Quicksand, sans-serif"},children:[e.jsx("i",{className:"bi bi-person me-2"}),"Usuario Demo"]}),e.jsxs(a,{variant:"outline-danger",size:"sm",onClick:()=>Q("admin"),style:{fontFamily:"Quicksand, sans-serif"},children:[e.jsx("i",{className:"bi bi-shield-check me-2"}),"Admin Demo"]})]})]}),e.jsx("div",{className:"text-center mt-4 pt-3 border-top",children:e.jsxs(t,{to:"/",className:"text-decoration-none text-muted",style:{fontFamily:"Quicksand, sans-serif",fontSize:"0.9rem"},children:[e.jsx("i",{className:"bi bi-arrow-left me-1"}),"Volver a la tienda"]})})]})})})})})})]})};export{m as default};
