import{r as t}from"./react-BlGBNzmT.js";import{j as e}from"./react-jsx-BHrkn65s.js";const r={api:{baseUrl:"https://69000051e02b16d1753fd8e6.mockapi.io",productsEndpoint:"/products"},auth:{admin:{email:"admin@shopnow.com",password:"admin123"},user:{email:"usuario@shopnow.com",password:"user123"}},social:{twitter:"https://twitter.com",instagram:"https://instagram.com",whatsappUrl:"https://wa.me/1234567890"}},o=r.api.baseUrl,a=r.api.productsEndpoint,i=async()=>{try{const t=await fetch(`${o}${a}`);if(!t.ok)throw new Error(`Error HTTP: ${t.status}`);return await t.json()}catch(t){throw new Error(`Error al cargar productos: ${t.message}`)}},s=async t=>{try{const e=await fetch(`${o}${a}/${t}`);if(!e.ok)throw new Error(`Error HTTP: ${e.status}`);return await e.json()}catch(e){throw new Error(`Error al cargar producto: ${e.message}`)}},c={getProducts:i,getProductById:s,getProductsByCategory:async t=>(await i()).filter(e=>e.category===t),getProductsByGender:async t=>(await i()).filter(e=>e.gender===t)},n=t.createContext(),d=t.createContext(),p=t.createContext(),m=({children:r})=>{const[o,a]=t.useState([]),[i,s]=t.useState(!0),[n,d]=t.useState(null),[m,l]=t.useState([]);t.useEffect(()=>{u()},[]);const u=async()=>{try{s(!0),d(null);const t=(await c.getProducts()).map(t=>({...t,stock:void 0!==t.stock?t.stock:Math.floor(50*Math.random())+5}));a(t)}catch(t){d(t.message),a([])}finally{s(!1)}},g={products:[...m,...o],loading:i,error:n,localProducts:m,agregarProducto:t=>{const e={...t,id:Date.now(),title:t.nombre,name:t.nombre,price:parseFloat(t.precio),description:t.descripcion,category:"general",image:t.imagen||"https://via.placeholder.com/300x300?text=Nuevo+Producto",img:t.imagen||"https://via.placeholder.com/300x300?text=Nuevo+Producto",stock:t.stock?parseInt(t.stock):0,isLocal:!0};return l(t=>[e,...t]),e},editarProducto:(t,e)=>{const r=parseInt(t);if(m.some(t=>t.id===r))l(t=>t.map(t=>t.id===r?{...t,...e,title:e.nombre||t.title,name:e.nombre||t.name,price:e.precio?parseFloat(e.precio):t.price,description:e.descripcion||t.description,image:e.imagen||t.image,img:e.imagen||t.img,stock:e.stock?parseInt(e.stock):t.stock||0}:t));else{const t=o.find(t=>t.id===r);if(t){const o={...t,...e,id:Date.now(),originalId:r,title:e.nombre||t.title||t.name,name:e.nombre||t.name||t.title,price:e.precio?parseFloat(e.precio):t.price,description:e.descripcion||t.description,image:e.imagen||t.image||t.img,img:e.imagen||t.img||t.image,stock:e.stock?parseInt(e.stock):t.stock||0,isLocal:!0,isEditedVersion:!0};l(t=>[o,...t]),a(t=>t.filter(t=>t.id!==r))}}},eliminarProducto:t=>{l(e=>e.filter(e=>e.id!==t))},obtenerProductoPorId:t=>{const e=m.find(e=>e.id===parseInt(t));return e||o.find(e=>e.id===parseInt(t))},esProductoEditable:()=>!0,refetch:()=>{u()},loadProducts:u};return e.jsx(p.Provider,{value:g,children:r})};export{d as A,n as C,p as P,m as a,r as c,s as g,c as p};
