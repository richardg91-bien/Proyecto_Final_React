import{j as e}from"./react-jsx-BHrkn65s.js";import{r as s}from"./react-BlGBNzmT.js";import{H as a}from"./ui-libs-CMC0-5Gq.js";import{u as r}from"./admin-chunk-Ccd8qXJX.js";import{c as i}from"./app-context-CeLer4GA.js";import{F as n,B as t}from"./bootstrap-Bz9xP46s.js";import{u as o,a as l,L as c}from"./router-CCsHvCk2.js";import"./vendor-DuX8qqVz.js";import"./react-dom-CdLH0Htr.js";import"./scheduler-6ULW7vKx.js";const m=()=>{const{login:m,register:d,isAuthenticated:u}=r(),[p,f]=s.useState("login"),[h,g]=s.useState({email:"",password:"",name:"",confirmPassword:""}),[x,j]=s.useState(""),[b,y]=s.useState(""),[N,w]=s.useState(!1),v=o(),k=v.state?.from?.pathname||"/",F="/cart"===k;if(u)return e.jsx(l,{to:k,replace:!0});const C=e=>{const{name:s,value:a}=e.target;g(e=>({...e,[s]:a})),j(""),y("")},Q=e=>{g("admin"===e?{email:i.auth.admin.email,password:i.auth.admin.password,name:"Administrador",confirmPassword:i.auth.admin.password}:{email:i.auth.user.email,password:i.auth.user.password,name:"Usuario Demo",confirmPassword:i.auth.user.password})};return e.jsxs(e.Fragment,{children:[e.jsxs(a,{children:[e.jsxs("title",{children:["login"===p?"Iniciar Sesión":"Crear Cuenta"," - Indumentaria Agat"]}),e.jsx("meta",{name:"description",content:"Inicia sesión o crea tu cuenta en Indumentaria Agat. Accede a tu carrito, historial de compras y ofertas exclusivas. ¡Regístrate gratis!"}),e.jsx("meta",{name:"keywords",content:"login, iniciar sesión, registro, crear cuenta, mi cuenta, Indumentaria Agat"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-6 col-lg-5",children:e.jsx("div",{className:"card shadow-lg border-0",children:e.jsxs("div",{className:"card-body p-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[F&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-cart-plus me-2"}),e.jsx("strong",{children:"¡Para comprar necesitas una cuenta!"}),e.jsx("br",{}),e.jsx("small",{children:"Regístrate o inicia sesión para acceder a tu carrito de compras"})]}),e.jsx("h2",{className:"h3 fw-bold",style:{color:"rgba(0,0,0,0.8)",fontFamily:"Lato, sans-serif"},children:"login"===p?"Iniciar Sesión":"Crear Cuenta"}),e.jsx("p",{className:"text-muted",style:{fontFamily:"Quicksand, sans-serif"},children:F?"login"===p?"Inicia sesión para acceder a tu carrito":"Crea tu cuenta para empezar a comprar":"login"===p?"Accede a tu cuenta de Indumentaria Agat":"Regístrate en Indumentaria Agat"})]}),x&&e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),x]}),b&&e.jsxs("div",{className:"alert alert-success",role:"alert",children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),b]}),e.jsxs(n,{onSubmit:async e=>{if(e.preventDefault(),w(!0),j(""),y(""),(()=>{if("register"===p){if(!h.name.trim())return j("El nombre es obligatorio"),!1;if(h.password!==h.confirmPassword)return j("Las contraseñas no coinciden"),!1;if(h.password.length<6)return j("La contraseña debe tener al menos 6 caracteres"),!1}return!(!h.email||!h.password)||(j("Email y contraseña son obligatorios"),!1)})())try{let e;"register"===p?(e=d(h),e.success&&y("¡Registro exitoso! Iniciando sesión automáticamente...")):(e=m(h),e.success&&y("¡Login exitoso! Redirigiendo...")),e.success||j(e.message||"Error al "+("register"===p?"registrarse":"iniciar sesión"))}catch{j("Error inesperado. Inténtalo de nuevo.")}finally{w(!1)}else w(!1)},children:["register"===p&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Nombre completo *"}),e.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:h.name,onChange:C,required:"register"===p,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"Tu nombre completo",autoComplete:"name"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Correo electrónico *"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:h.email,onChange:C,required:!0,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"tu@email.com",autoComplete:"email"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Contraseña *"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:h.password,onChange:C,required:!0,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"register"===p?"Mínimo 6 caracteres":"Tu contraseña",autoComplete:"register"===p?"new-password":"current-password"})]}),"register"===p&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Confirmar contraseña *"}),e.jsx("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:h.confirmPassword,onChange:C,required:"register"===p,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"Repite tu contraseña",autoComplete:"new-password"})]}),e.jsx(t,{type:"submit",size:"lg",className:"w-100 mb-3",disabled:N,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"25px",fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"register"===p?"Registrando...":"Iniciando sesión..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`bi ${"register"===p?"bi-person-plus":"bi-box-arrow-in-right"} me-2`}),"register"===p?"Crear Cuenta":"Iniciar Sesión"]})})]}),e.jsx("div",{className:"text-center mb-3",children:e.jsx("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:()=>{f("login"===p?"register":"login"),j(""),y(""),g({email:"",password:"",name:"",confirmPassword:""})},style:{fontFamily:"Quicksand, sans-serif"},children:"login"===p?"¿No tienes cuenta? Regístrate aquí":"¿Ya tienes cuenta? Inicia sesión aquí"})}),e.jsxs("div",{className:"border-top pt-3 mt-4",children:[e.jsx("p",{className:"text-center text-muted small mb-3",style:{fontFamily:"Quicksand, sans-serif"},children:"Cuentas de prueba:"}),e.jsxs("div",{className:"d-grid gap-2",children:[e.jsxs(t,{variant:"outline-primary",size:"sm",onClick:()=>Q("user"),style:{fontFamily:"Quicksand, sans-serif"},children:[e.jsx("i",{className:"bi bi-person me-2"}),"Usuario Demo"]}),e.jsxs(t,{variant:"outline-danger",size:"sm",onClick:()=>Q("admin"),style:{fontFamily:"Quicksand, sans-serif"},children:[e.jsx("i",{className:"bi bi-shield-check me-2"}),"Admin Demo"]})]})]}),e.jsx("div",{className:"text-center mt-4 pt-3 border-top",children:e.jsxs(c,{to:"/",className:"text-decoration-none text-muted",style:{fontFamily:"Quicksand, sans-serif",fontSize:"0.9rem"},children:[e.jsx("i",{className:"bi bi-arrow-left me-1"}),"Volver a la tienda"]})})]})})})})})})]})};export{m as default};
