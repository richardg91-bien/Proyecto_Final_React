import{r as e,j as s}from"./react-core-EPkW1EvQ.js";import{H as a}from"./ui-libs-3dkMKyrp.js";import{u as r}from"./admin-chunk-Ccbd7K1h.js";import{c as i}from"./app-context-CtOgQFqT.js";import{F as n,B as t}from"./bootstrap-DhsYAI4U.js";import{u as o,a as l,L as c}from"./router-B-h6ipEo.js";import"./vendor-BGXBIffO.js";const m=()=>{const{login:m,register:d,isAuthenticated:u}=r(),[p,f]=e.useState("login"),[g,h]=e.useState({email:"",password:"",name:"",confirmPassword:""}),[x,b]=e.useState(""),[j,y]=e.useState(""),[N,w]=e.useState(!1),v=o(),k=v.state?.from?.pathname||"/",F="/cart"===k;if(u)return s.jsx(l,{to:k,replace:!0});const C=e=>{const{name:s,value:a}=e.target;h(e=>({...e,[s]:a})),b(""),y("")},Q=e=>{h("admin"===e?{email:i.auth.admin.email,password:i.auth.admin.password,name:"Administrador",confirmPassword:i.auth.admin.password}:{email:i.auth.user.email,password:i.auth.user.password,name:"Usuario Demo",confirmPassword:i.auth.user.password})};return s.jsxs(s.Fragment,{children:[s.jsxs(a,{children:[s.jsxs("title",{children:["login"===p?"Iniciar Sesión":"Crear Cuenta"," - Indumentaria Agat"]}),s.jsx("meta",{name:"description",content:"Inicia sesión o crea tu cuenta en Indumentaria Agat. Accede a tu carrito, historial de compras y ofertas exclusivas. ¡Regístrate gratis!"}),s.jsx("meta",{name:"keywords",content:"login, iniciar sesión, registro, crear cuenta, mi cuenta, Indumentaria Agat"}),s.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),s.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-md-6 col-lg-5",children:s.jsx("div",{className:"card shadow-lg border-0",children:s.jsxs("div",{className:"card-body p-5",children:[s.jsxs("div",{className:"text-center mb-4",children:[F&&s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-cart-plus me-2"}),s.jsx("strong",{children:"¡Para comprar necesitas una cuenta!"}),s.jsx("br",{}),s.jsx("small",{children:"Regístrate o inicia sesión para acceder a tu carrito de compras"})]}),s.jsx("h2",{className:"h3 fw-bold",style:{color:"rgba(0,0,0,0.8)",fontFamily:"Lato, sans-serif"},children:"login"===p?"Iniciar Sesión":"Crear Cuenta"}),s.jsx("p",{className:"text-muted",style:{fontFamily:"Quicksand, sans-serif"},children:F?"login"===p?"Inicia sesión para acceder a tu carrito":"Crea tu cuenta para empezar a comprar":"login"===p?"Accede a tu cuenta de Indumentaria Agat":"Regístrate en Indumentaria Agat"})]}),x&&s.jsxs("div",{className:"alert alert-danger",role:"alert",children:[s.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),x]}),j&&s.jsxs("div",{className:"alert alert-success",role:"alert",children:[s.jsx("i",{className:"bi bi-check-circle me-2"}),j]}),s.jsxs(n,{onSubmit:async e=>{if(e.preventDefault(),w(!0),b(""),y(""),(()=>{if("register"===p){if(!g.name.trim())return b("El nombre es obligatorio"),!1;if(g.password!==g.confirmPassword)return b("Las contraseñas no coinciden"),!1;if(g.password.length<6)return b("La contraseña debe tener al menos 6 caracteres"),!1}return!(!g.email||!g.password)||(b("Email y contraseña son obligatorios"),!1)})())try{let e;"register"===p?(e=d(g),e.success&&y("¡Registro exitoso! Iniciando sesión automáticamente...")):(e=m(g),e.success&&y("¡Login exitoso! Redirigiendo...")),e.success||b(e.message||"Error al "+("register"===p?"registrarse":"iniciar sesión"))}catch{b("Error inesperado. Inténtalo de nuevo.")}finally{w(!1)}else w(!1)},children:["register"===p&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"name",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Nombre completo *"}),s.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:g.name,onChange:C,required:"register"===p,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"Tu nombre completo",autoComplete:"name"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"email",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Correo electrónico *"}),s.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:g.email,onChange:C,required:!0,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"tu@email.com",autoComplete:"email"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Contraseña *"}),s.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:g.password,onChange:C,required:!0,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"register"===p?"Mínimo 6 caracteres":"Tu contraseña",autoComplete:"register"===p?"new-password":"current-password"})]}),"register"===p&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"form-label",style:{fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:"Confirmar contraseña *"}),s.jsx("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:g.confirmPassword,onChange:C,required:"register"===p,style:{fontFamily:"Quicksand, sans-serif"},placeholder:"Repite tu contraseña",autoComplete:"new-password"})]}),s.jsx(t,{type:"submit",size:"lg",className:"w-100 mb-3",disabled:N,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"25px",fontFamily:"Quicksand, sans-serif",fontWeight:"600"},children:N?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"register"===p?"Registrando...":"Iniciando sesión..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:`bi ${"register"===p?"bi-person-plus":"bi-box-arrow-in-right"} me-2`}),"register"===p?"Crear Cuenta":"Iniciar Sesión"]})})]}),s.jsx("div",{className:"text-center mb-3",children:s.jsx("button",{type:"button",className:"btn btn-link text-decoration-none",onClick:()=>{f("login"===p?"register":"login"),b(""),y(""),h({email:"",password:"",name:"",confirmPassword:""})},style:{fontFamily:"Quicksand, sans-serif"},children:"login"===p?"¿No tienes cuenta? Regístrate aquí":"¿Ya tienes cuenta? Inicia sesión aquí"})}),s.jsxs("div",{className:"border-top pt-3 mt-4",children:[s.jsx("p",{className:"text-center text-muted small mb-3",style:{fontFamily:"Quicksand, sans-serif"},children:"Cuentas de prueba:"}),s.jsxs("div",{className:"d-grid gap-2",children:[s.jsxs(t,{variant:"outline-primary",size:"sm",onClick:()=>Q("user"),style:{fontFamily:"Quicksand, sans-serif"},children:[s.jsx("i",{className:"bi bi-person me-2"}),"Usuario Demo"]}),s.jsxs(t,{variant:"outline-danger",size:"sm",onClick:()=>Q("admin"),style:{fontFamily:"Quicksand, sans-serif"},children:[s.jsx("i",{className:"bi bi-shield-check me-2"}),"Admin Demo"]})]})]}),s.jsx("div",{className:"text-center mt-4 pt-3 border-top",children:s.jsxs(c,{to:"/",className:"text-decoration-none text-muted",style:{fontFamily:"Quicksand, sans-serif",fontSize:"0.9rem"},children:[s.jsx("i",{className:"bi bi-arrow-left me-1"}),"Volver a la tienda"]})})]})})})})})})]})};export{m as default};
